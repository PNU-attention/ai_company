---
name: expert-agent
description: "전문가 에이전트 - HR이 생성한 전문가 역할을 수행하며 할당된 태스크를 실행합니다. 태스크 실행, 도구 사용, 인터럽트 생성을 담당합니다. 사용 시점: (1) /expert-agent 명령 실행 시, (2) 태스크 실행이 필요할 때, (3) 특정 전문가 역할 수행 시, (4) 도구를 사용한 작업 수행 시."
---

# Expert Agent v2

HR이 고용한 전문가 역할을 수행하며, 할당된 Tool을 사용하여 태스크를 실행합니다.

## v2 워크플로우에서의 역할

```
[입력]
- task_assignments.json (할당된 태스크)
- hired_agents.json (자신의 역할 및 Tool 정보)

[실행]
- 할당된 Tool을 실제로 사용하여 태스크 수행
- Built-in, Skill, MCP Tool 모두 사용 가능

[출력]
- execution_log.json (실행 로그)
- 태스크 결과물 (파일, 보고서 등)
```

## Commands

```
/expert-agent execute <task_id>  - 특정 태스크 실행
/expert-agent run-project <proj_id>  - 프로젝트 전체 실행
/expert-agent status  - 현재 상태 확인
/expert-agent list  - 할당된 태스크 목록
```

---

## 실행 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                      태스크 실행 흐름                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 태스크 정보 로드                                            │
│       ↓                                                         │
│  2. 의존성 확인 (선행 태스크 완료 여부)                         │
│       ├─ 미완료 → 대기 또는 선행 태스크 먼저 실행               │
│       └─ 완료 → 계속                                            │
│       ↓                                                         │
│  3. 필수 입력 확인                                              │
│       ├─ 부족 → CEO에게 INFO_REQUEST 인터럽트                   │
│       └─ 충족 → 계속                                            │
│       ↓                                                         │
│  4. 할당된 Tool 확인                                            │
│       ├─ Tool 사용 가능 → 계속                                  │
│       └─ Tool 오류 → CEO에게 TOOL_ERROR 인터럽트                │
│       ↓                                                         │
│  5. 태스크 실행 (Tool 사용)                                     │
│       ├─ Built-in: WebSearch, Write 등 직접 호출                │
│       ├─ Skill: /frontend-design 등 스킬 호출                   │
│       └─ MCP: figma, rube 등 MCP 도구 호출                      │
│       ↓                                                         │
│  6. 승인 필요 시 (APPROVAL 타입 태스크)                         │
│       └─ CEO에게 APPROVAL_REQUEST 인터럽트                      │
│       ↓                                                         │
│  7. 결과 저장                                                   │
│       └─ execution_log.json 업데이트                            │
│       ↓                                                         │
│  8. 다음 태스크로 이동                                          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Tool 사용 방법

### Built-in Tools

Claude Code의 내장 도구를 직접 사용합니다:

```markdown
Task: 시장 트렌드 조사
Tool: WebSearch

[실행]
WebSearch로 "2025년 쿠팡 인기 카테고리" 검색

[결과]
1. 생활용품: 전년 대비 23% 성장
2. 건강식품: 전년 대비 45% 성장
3. 반려동물: 전년 대비 38% 성장
```

### Skills

스킬을 호출하여 실행합니다:

```markdown
Task: 제품 상세 페이지 디자인
Tool: /frontend-design

[실행]
/frontend-design 스킬 호출
- 요청: 쿠팡 스타일 제품 상세 페이지
- 제품: USB 충전 손풍기
- 스타일: 깔끔하고 전환율 높은 디자인

[결과]
HTML/CSS 코드 생성 완료
파일 저장: company/outputs/product_page.html
```

### MCP Tools

설정된 MCP 서버의 도구를 사용합니다:

```markdown
Task: Figma 디자인 작업
Tool: figma (MCP)

[실행]
Figma MCP를 통해 디자인 파일 생성/수정

[결과]
Figma 파일 URL: https://figma.com/file/xxx
```

---

## 실행 예시

### 예시 1: 리서치 태스크

```
/expert-agent execute task-001

══════════════════════════════════════════════════════════════
   ⚡ Expert Agent: 태스크 실행
══════════════════════════════════════════════════════════════

📋 태스크: task-001 - 시장 트렌드 조사
👤 담당: 트렌드 리서처 (expert-001)
🔧 Tool: WebSearch

[의존성 확인] ✅ 선행 태스크 없음

[입력 확인] ✅ 필수 입력 없음

[실행 중...]

🔍 WebSearch: "2026년 쿠팡 인기 카테고리 트렌드"

검색 결과 분석 중...

[결과]
┌──────────────────────────────────────────────────────────────┐
│ 📊 2026년 쿠팡 트렌드 분석 결과                              │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ 1. 🏠 생활용품                                               │
│    - 성장률: 23%                                             │
│    - 인기 품목: 수납용품, 청소용품                           │
│                                                              │
│ 2. 💊 건강식품                                               │
│    - 성장률: 45%                                             │
│    - 인기 품목: 프로바이오틱스, 비타민                       │
│                                                              │
│ 3. 🐕 반려동물                                               │
│    - 성장률: 38%                                             │
│    - 인기 품목: 사료, 간식, 장난감                           │
│                                                              │
│ 4. 👶 유아용품                                               │
│    - 성장률: 28%                                             │
│    - 인기 품목: 기저귀, 분유                                 │
│                                                              │
└──────────────────────────────────────────────────────────────┘

[저장]
📄 company/outputs/trend_report_task001.md

✅ 태스크 완료
──────────────────────────────────────────────────────────────
다음 태스크: task-002 (경쟁사 분석)
```

### 예시 2: 디자인 태스크

```
/expert-agent execute task-006

══════════════════════════════════════════════════════════════
   ⚡ Expert Agent: 태스크 실행
══════════════════════════════════════════════════════════════

📋 태스크: task-006 - 제품 상세 페이지 디자인
👤 담당: 디자인 전문가 (expert-002)
🔧 Tool: /frontend-design (Skill)

[의존성 확인]
  ✅ task-005 (공급업체 리스트업) - 완료

[입력 확인]
  ⚠️ 필수 입력 부족: product_images, product_specs

══════════════════════════════════════════════════════════════
   🔔 인터럽트: 정보 요청
══════════════════════════════════════════════════════════════

태스크 실행에 필요한 정보를 입력해주세요:

1. product_images: 제품 이미지
   예: 이미지 URL 또는 파일 경로

2. product_specs: 제품 사양
   예: 크기, 무게, 재질, 기능 등

입력:
```

CEO 입력 후:

```
[입력 확인] ✅ 모든 입력 확인됨

[실행 중...]

🎨 /frontend-design 스킬 호출

요청:
- 제품: USB 충전 휴대용 손풍기
- 스타일: 쿠팡 스타일, 전환율 높은 디자인
- 제품 이미지: [제공된 이미지]
- 제품 사양:
  • 크기: 10cm x 5cm
  • 배터리: 2000mAh
  • 풍속: 3단계

생성 중...

[결과]
┌──────────────────────────────────────────────────────────────┐
│ 🎨 디자인 결과                                               │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ ✅ HTML/CSS 코드 생성 완료                                   │
│                                                              │
│ 파일:                                                        │
│   📄 company/outputs/product_page_task006.html               │
│   📄 company/outputs/product_page_task006.css                │
│                                                              │
│ 미리보기: 브라우저에서 HTML 파일을 열어 확인하세요           │
│                                                              │
└──────────────────────────────────────────────────────────────┘

✅ 태스크 완료
```

### 예시 3: 승인 필요 태스크

```
/expert-agent execute task-003

══════════════════════════════════════════════════════════════
   ⚡ Expert Agent: 태스크 실행
══════════════════════════════════════════════════════════════

📋 태스크: task-003 - 제품 카테고리 선정
👤 담당: CEO (APPROVAL 태스크)
🔧 Tool: 분석 결과 기반

[의존성 확인]
  ✅ task-001 (트렌드 조사) - 완료
  ✅ task-002 (경쟁사 분석) - 완료

[분석 결과 종합]

이전 태스크 결과 기반 카테고리 추천:

┌──────────────────────────────────────────────────────────────┐
│ 📊 카테고리 추천                                             │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ 1. 🏆 반려동물 용품 (추천)                                   │
│    - 성장률: 38%                                             │
│    - 경쟁강도: 중간                                          │
│    - 초기 투자: 300만원 예상                                 │
│    - 예상 마진: 35-45%                                       │
│                                                              │
│ 2. 💊 건강식품                                               │
│    - 성장률: 45%                                             │
│    - 경쟁강도: 높음                                          │
│    - 초기 투자: 500만원 예상                                 │
│    - 예상 마진: 25-35%                                       │
│                                                              │
│ 3. 🏠 생활용품                                               │
│    - 성장률: 23%                                             │
│    - 경쟁강도: 매우 높음                                     │
│    - 초기 투자: 200만원 예상                                 │
│    - 예상 마진: 20-30%                                       │
│                                                              │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════
   🔔 인터럽트: 승인 요청
══════════════════════════════════════════════════════════════

진입할 카테고리를 선택해주세요:

[1] 반려동물 용품 (추천)
[2] 건강식품
[3] 생활용품
[4] 직접 입력

선택:
```

---

## 인터럽트 타입

### INFO_REQUEST
```json
{
  "type": "info_request",
  "source": "expert-002",
  "task_id": "task-006",
  "message": "제품 정보를 입력해주세요",
  "required_inputs": [
    {"key": "product_images", "description": "제품 이미지"},
    {"key": "product_specs", "description": "제품 사양"}
  ]
}
```

### APPROVAL_REQUEST
```json
{
  "type": "approval_request",
  "source": "expert-001",
  "task_id": "task-003",
  "message": "카테고리 선택을 승인해주세요",
  "options": ["반려동물 용품", "건강식품", "생활용품", "직접 입력"]
}
```

### TOOL_ERROR
```json
{
  "type": "tool_error",
  "source": "expert-002",
  "task_id": "task-006",
  "message": "Tool 실행 중 오류 발생",
  "tool": "/frontend-design",
  "error": "스킬을 찾을 수 없습니다"
}
```

---

## 결과 저장

### execution_log.json

```json
{
  "logs": [
    {
      "log_id": "log_001",
      "task_id": "task-001",
      "agent_id": "expert-001",
      "started_at": "2025-01-19T10:00:00Z",
      "completed_at": "2025-01-19T10:05:00Z",
      "status": "completed",
      "tools_used": ["WebSearch"],
      "outputs": [
        "company/outputs/trend_report_task001.md"
      ],
      "summary": "2026년 쿠팡 트렌드 분석 완료. 반려동물 카테고리 성장세 확인."
    }
  ]
}
```

### 출력 파일 구조

```
company/outputs/
├── trend_report_task001.md      # 리서치 결과
├── competitor_analysis_task002.md  # 경쟁사 분석
├── product_page_task006.html    # 디자인 결과
├── product_page_task006.css
└── supplier_list_task005.csv    # 공급업체 목록
```

---

## 역할별 시스템 프롬프트

Expert Agent는 자신의 역할에 맞는 시스템 프롬프트로 동작합니다:

```markdown
# {role_name}

당신은 AI Company의 {role_name}입니다.

## 현재 태스크
{task_name}: {task_description}

## 사용 가능한 도구
{assigned_tools}

## 행동 지침
1. 태스크를 성실히 수행합니다
2. 할당된 Tool만 사용합니다
3. 필요한 정보가 부족하면 CEO에게 요청합니다
4. 작업 결과를 명확히 보고합니다
5. 자신의 전문 영역을 벗어나면 다른 전문가에게 위임 요청합니다
```
